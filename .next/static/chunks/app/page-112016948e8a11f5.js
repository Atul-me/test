(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8977:(e,t,a)=>{Promise.resolve().then(a.bind(a,735))},735:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>A});var n=a(5155),r=a(2115),s=a(2651),o=a(4798),c=a(6121),l=a(3667),i=a(2841),d=a(5288),p=a(9269);let u=e=>{let{setVideoUrl:t,fetchCaptions:a}=e,[u,x]=(0,r.useState)(""),[h,m]=(0,r.useState)(""),[j,v]=(0,r.useState)(""),[A,f]=(0,r.useState)(""),[C,y]=(0,r.useState)([]),[g,N]=(0,r.useState)(!1),[b,k]=(0,r.useState)(null),E=async e=>{let t=new FormData;t.append("video",e.target.files[0]);try{let e=await s.A.post("".concat("","/api/upload"),t);x(e.data.videoUrl)}catch(e){console.error("Error uploading video",e)}},S=async()=>{try{await s.A.post("".concat("","/api/captions"),{videoUrl:u,captions:C}),a(u),t(u)}catch(e){console.error("Error saving captions",e)}},w=async()=>{if(!u)return alert("Enter a video URL or upload an MP4!");try{(await s.A.get("".concat("","/api/captions?videoUrl=").concat(encodeURIComponent(u)))).data.captions.length>0?(a(u),t(u)):N(!0)}catch(e){console.error("Error fetching captions",e)}};return(0,n.jsxs)(o.A,{className:"mt-5",children:[(0,n.jsx)(c.A,{className:"justify-content-center",children:(0,n.jsxs)(l.A,{md:6,children:[(0,n.jsx)("h3",{className:"text-center",children:"Upload or Enter Video"}),(0,n.jsxs)(i.A,{children:[(0,n.jsx)(i.A.Group,{children:(0,n.jsx)(i.A.Control,{type:"text",placeholder:"Enter YouTube URL or MP4 link",value:u,onChange:e=>x(e.target.value),className:"mb-2"})}),(0,n.jsx)(i.A.Group,{children:(0,n.jsx)(i.A.Control,{type:"file",className:"mb-2",onChange:E})}),(0,n.jsx)(i.A.Group,{children:(0,n.jsx)(i.A.Control,{type:"text",placeholder:"Caption Text",value:h,onChange:e=>m(e.target.value),className:"mb-2"})}),(0,n.jsx)(i.A.Group,{children:(0,n.jsx)(i.A.Control,{type:"number",placeholder:"Start Time (sec)",value:j,onChange:e=>v(e.target.value),className:"mb-2"})}),(0,n.jsx)(i.A.Group,{children:(0,n.jsx)(i.A.Control,{type:"number",placeholder:"End Time (sec)",value:A,onChange:e=>f(e.target.value),className:"mb-2"})}),(0,n.jsx)(d.A,{variant:"primary",onClick:()=>{y([...C,{text:h,startTime:parseFloat(j),endTime:parseFloat(A)}]),m(""),v(""),f("")},className:"me-2",children:"Add Caption"}),(0,n.jsx)(d.A,{variant:"success",onClick:S,className:"me-2",children:"Save & Play"}),(0,n.jsx)(d.A,{variant:"info",onClick:w,children:"Play"})]})]})}),(0,n.jsxs)(p.A,{show:g,onHide:()=>N(!1),children:[(0,n.jsx)(p.A.Header,{closeButton:!0,children:(0,n.jsx)(p.A.Title,{children:"No Captions Found"})}),(0,n.jsx)(p.A.Body,{children:(0,n.jsx)("p",{children:"Would you like to add captions or play without captions?"})}),(0,n.jsxs)(p.A.Footer,{children:[(0,n.jsx)(d.A,{variant:"secondary",onClick:()=>N(!1),children:"Add Captions"}),(0,n.jsx)(d.A,{variant:"primary",onClick:()=>t(u),children:"Play Without Captions"})]})]})]})};var x=a(8803),h=a.n(x),m=a(2802),j=a.n(m);let v=e=>{let{videoUrl:t,captions:a}=e,[s,c]=(0,r.useState)(0),l=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=setInterval(()=>{l.current&&c(l.current.getCurrentTime())},500);return()=>clearInterval(e)},[]);let i=a.find(e=>s>=e.startTime&&s<=e.endTime);return(0,n.jsxs)(o.A,{className:"text-center mt-5",children:[(0,n.jsxs)("div",{className:"jsx-c59fd878402925dc video-container",children:[(0,n.jsx)(j(),{ref:l,url:t,controls:!0}),i&&(0,n.jsx)("p",{className:"jsx-c59fd878402925dc caption",children:i.text})]}),(0,n.jsx)(h(),{id:"c59fd878402925dc",children:".video-container.jsx-c59fd878402925dc{position:relative;display:inline-block}.caption.jsx-c59fd878402925dc{background:rgba(0,0,0,.7);color:white;padding:5px;text-align:center;font-size:18px;position:absolute;bottom:10px;left:50%;-webkit-transform:translatex(-50%);-moz-transform:translatex(-50%);-ms-transform:translatex(-50%);-o-transform:translatex(-50%);transform:translatex(-50%)}"})]})};function A(){let[e,t]=(0,r.useState)(""),[a,o]=(0,r.useState)([]),c=async e=>{try{let t=await s.A.get("".concat("","/api/captions?videoUrl=").concat(encodeURIComponent(e)));o(t.data.captions||[])}catch(e){console.error("Error fetching captions:",e),o([])}};return(0,n.jsxs)("div",{className:"container text-center mt-5",children:[(0,n.jsx)("h1",{className:"mb-4",children:"\uD83C\uDFAC Video Caption Tool"}),(0,n.jsx)(u,{setVideoUrl:t,fetchCaptions:c}),e&&(0,n.jsx)(v,{videoUrl:e,captions:a})]})}a(5685)}},e=>{var t=t=>e(e.s=t);e.O(0,[740,154,441,517,358],()=>t(8977)),_N_E=e.O()}]);